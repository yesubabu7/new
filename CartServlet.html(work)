<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Store</title>
    <style>
        .product-card {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px;
            width: 200px;
            display: inline-block;
        }

        .product-image {
            width: 100%;
            max-height: 150px;
        }

        .product-name {
            font-weight: bold;
            margin-top: 5px;
        }

        .product-price {
            color: #007bff;
        }
    </style>
</head>
<body>
    <h1>Online Store</h1>
    <div id="productList"></div>
    <div id="cart">
        <h2>Cart</h2>
        <ul id="cartItems"></ul>
    </div>
        
    <button id="viewCart">View Cart</button>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const products = [
            // Your product data JSON here
            // ...
            {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Gold",
    "product_name": "Alloy-Gold plated Gold",
    "price": 99
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg ",
    "product_type": "Silver",
    "product_name": "Sterling Silver Necklace",
    "price": 99
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Electronics",
    "product_name": "Smartphone X",
    "price": 999
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Clothing",
    "product_name": "Men's T-shirt",
    "price": 99
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg ",
    "product_type": "Books",
    "product_name": "The Great Gatsby",
    "price": 12.95
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Food",
    "product_name": "Organic Apples",
    "price": 4.50
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg ",
    "product_type": "Beauty",
    "product_name": "Anti-aging Serum",
    "price": 99
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Sports",
    "product_name": "Yoga Mat",
    "price": 24.95
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Furniture",
    "product_name": "Modern Coffee Table",
    "price": 99.50
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Toys",
    "product_name": "Remote Control Car",
    "price": 99
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Accessories",
    "product_name": "Classic Watch",
    "price": 149
  },
  {
    "ImageUrl": "https://cdn1.jewelxy.com/live/img/business_product/7OOQveQu2n_20220323155709.jpg",
    "product_type": "Electronics",
    "product_name": "Laptop XYZ",
    "price": 99
  }
        ];

        const productList = document.getElementById("productList");
        const cartItems = document.getElementById("cartItems");
        const viewCartButton = document.getElementById("viewCart");

        function renderProducts() {
            products.forEach(product => {
                const productCard = document.createElement("div");
                productCard.classList.add("product-card");

                const productImage = document.createElement("img");
                productImage.src = product.ImageUrl;
                productImage.classList.add("product-image");
                productCard.appendChild(productImage);

                const productName = document.createElement("div");
                productName.textContent = product.product_name;
                productName.classList.add("product-name");
                productCard.appendChild(productName);

                const productPrice = document.createElement("div");
                productPrice.textContent = `$${product.price.toFixed(2)}`;
                productPrice.classList.add("product-price");
                productCard.appendChild(productPrice);

                const addToCartButton = document.createElement("button");
                addToCartButton.textContent = "Add to Cart";
                addToCartButton.addEventListener("click", () => addToCart(product));
                productCard.appendChild(addToCartButton);

                productList.appendChild(productCard);
            });
        }

        function addToCart(product) {
            const na = product.product_name;
            const url = `CartServlet?action=add&product=${na}`;
            
            $.get(url, function(data) {
                console.log(data);
            });
        }

        viewCartButton.addEventListener("click", function() {
            const url = "CartServlet?action=view";
            $.get(url, function(data) {
                cartItems.innerHTML = data;
                const removeButtons = document.querySelectorAll(".remove-button");
                removeButtons.forEach(button => {
                    button.addEventListener("click", function() {
                        removeFromCart(button.getAttribute("data-product"));
                    });
                });
            });
        });

        function removeFromCart(product) {
            const na = product;
            const url = `CartServlet?action=remove&product=${na}`;
            
            $.get(url, function(data) {
                console.log(data);
                viewCartButton.click();
            });
        }

        renderProducts();
    </script>
</body>
</html>
